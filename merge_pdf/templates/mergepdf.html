<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Merge PDF - Professional Tool</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
 
 <style>
    :root {
  --main-bg: #f5f7fa;
  --dark-bg: #121212;
  --primary: #0066ff;
  --primary-dark: #004cc9;
  --light: #ffffff;
  --dark: #1f1f1f;
  --accent: #00c6ff;
  --border: #e0e0e0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  background-color: var(--main-bg);
  color: var(--dark);
  transition: background-color 0.4s ease, color 0.4s ease;
}

body.dark-mode {
  background-color: var(--dark-bg);
  color: var(--light);
}

.container {
  max-width: 960px;
  margin: 60px auto;
  padding: 2.5rem;
  background: var(--light);
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  transition: background 0.4s;
}

body.dark-mode .container {
  background: #1e1e1e;
}

.page-title {
  text-align: center;
  font-size: 2.8rem;
  color: var(--primary-dark);
  margin-bottom: 0.6rem;
}

.page-subtitle {
  text-align: center;
  font-size: 1.2rem;
  color: #555;
  margin-bottom: 2.5rem;
}

.upload-area {
  text-align: center;
  padding: 2.5rem;
  border: 2px dashed var(--border);
  border-radius: 12px;
  background-color: #fdfdfd;
  transition: all 0.3s ease;
  cursor: pointer;
}

.upload-area.dragover {
  background-color: #e0f4ff;
  border-color: var(--primary);
}

.upload-area.dark-mode {
  background-color: #2a2a2a;
  border-color: #444;
}

.upload-button {
  margin-top: 1.5rem;
  display: inline-block;
  padding: 12px 24px;
  background-color: var(--primary);
  color: white;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.upload-button:hover {
  background-color: var(--primary-dark);
}

#pdfs {
  display: none;
}

.file-list {
  list-style: none;
  padding: 0;
  margin: 1.5rem 0;
}

.file-list li {
  background: #eaf1f8;
  margin: 0.5rem 0;
  padding: 10px 14px;
  border-radius: 6px;
  font-size: 0.95rem;
}

.btn-merge {
  display: none;
  margin: auto;
  margin-top: 2rem;
  padding: 12px 26px;
  background-color: var(--primary);
  color: #fff;
  font-size: 1.1rem;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 102, 255, 0.25);
  transition: all 0.3s ease;
}

.btn-merge:hover {
  background-color: var(--primary-dark);
  box-shadow: 0 6px 16px rgba(0, 102, 255, 0.4);
}

.dark-mode-toggle {
  position: absolute;
  top: 20px;
  right: 20px;
}

.instructions {
  margin-top: 40px;
  background: #eef2f7;
  padding: 1.2rem 1.5rem;
  border-left: 4px solid var(--primary);
  border-radius: 8px;
}

.instructions h3 {
  margin-bottom: 0.8rem;
  color: var(--primary-dark);
}
.dark-mode .instructions {
  background: linear-gradient(135deg, #2b2b2b, #1f1f1f);
  color: #e0e0e0;
  border-left-color: var(--primary);
}


.footer-note {
  margin-top: 50px;
  text-align: center;
  font-size: 0.9rem;
  color: #888;
}

body.dark-mode .footer-note {
  color: #aaa;
}

/* Thumbnails */

#thumbnails {
  display: flex;
  flex-wrap: wrap;
  gap: 1.2rem;
  margin-top: 2rem;
}

.thumbnail-item {
  width: 110px;
  text-align: center;
  position: relative;
}

.thumbnail-item canvas {
  width: 100%;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

.thumbnail-filename {
  margin-top: 6px;
  font-size: 0.8rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.delete-btn {
  position: absolute;
  top: -8px;
  right: -8px;
  background: crimson;
  color: white;
  border: none;
  border-radius: 50%;
  width: 22px;
  height: 22px;
  font-size: 12px;
  cursor: pointer;
}

/* Info Section */

.info-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  margin: 4rem auto;
  padding: 0 1rem;
  animation: fadeIn 1s ease-in-out;
}

.info-item {
  background: #ffffff;
  color: #333;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
  border-top: 4px solid var(--primary);
}

.info-item:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 28px rgba(0, 123, 255, 0.2);
}

.info-item h2 {
  font-size: 1.8rem;
  color: var(--primary-dark);
  margin-bottom: 1rem;
}

.info-item p {
  font-size: 1.05rem;
  line-height: 1.6;
  margin-bottom: 1rem;
  flex-grow: 1;
}

.info-item ul {
  list-style: none;
  padding-left: 1rem;
}

.info-item ul li {
  margin-bottom: 0.7rem;
  position: relative;
  padding-left: 1.5rem;
}

.info-item ul li::before {
  content: "‚úì";
  position: absolute;
  left: 0;
  color: var(--primary);
  font-weight: bold;
}

body.dark-mode .info-item {
  background: #1c1c1c;
  color: #ccc;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.5);
}

body.dark-mode .info-item h2 {
  color: var(--primary);
}

body.dark-mode .info-item ul li::before {
  color: var(--accent);
}

/* Animations */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive */

@media (max-width: 600px) {
  .container {
    padding: 1.5rem;
  }

  .page-title {
    font-size: 2.2rem;
  }

  .info-section {
    grid-template-columns: 1fr;
  }

  .info-item h2 {
    font-size: 1.5rem;
  }

  .info-item p,
  .info-item ul li {
    font-size: 0.95rem;
  }
}


  </style>
</head>
<body>
  <div class="dark-mode-toggle">
    <button onclick="toggleDarkMode()">üåô Toggle Dark Mode</button>
  </div>

  <div class="container" id="container">
    <h1 class="page-title">üîó Professional PDF Merger</h1>
    <p class="page-subtitle">Easily combine multiple PDF documents into one ‚Äî fast, secure, and free.</p>

    <div class="upload-area" id="upload-area">
      <p><i class="fa-solid fa-file-arrow-up fa-2xl"></i></p>
      <p>Click below or drag and drop your PDF files</p>
      <label class="upload-button" for="pdfs"><i class="fa fa-folder-open"></i> Select PDF Files</label>
      <input type="file" id="pdfs" name="pdfs" multiple accept="application/pdf">
    </div>

    <div id="thumbnails" style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;"></div>

    <button id="mergeBtn" class="btn-merge" onclick="mergePDFs()">Merge Now</button>
    <div id="loading-spinner" style="display:none; text-align:center; margin-top:10px;">
  <i class="fa fa-spinner fa-spin fa-2x" aria-hidden="true"></i>
<p style="font-size: 1rem; margin-top: 10px; color: #e20b0b;">Please wait while we securely merge your PDFs...</p>
</div>

    <div class="instructions">
      <h3>üìã How to Use:</h3>
      <ol>
        <li>Select <strong>two or more PDF files</strong> using the button above.</li>
        <li>Once selected, the <strong>Merge Now</strong> button will appear.</li>
        <li>Click it and wait a few seconds to <strong>download your combined file</strong>.</li>
      </ol>
    </div>

    <div id="result" style="margin-top: 20px;"></div>

    
  </div>
  <div class="info-section">

  <div class="info-item">
    <h2>What is PDF Merging?</h2>
    <p>
      PDF merging is the process of combining multiple PDF documents into a single file, which makes it easier to manage, share, and store your documents efficiently. This is especially useful for organizing reports, contracts, or any multi-page documents.
    </p>
  </div>

  <div class="info-item">
    <h2>Benefits of Merging PDFs</h2>
    <ul>
      <li><strong>Simplifies file management:</strong> Keeps related documents together in one file.</li>
      <li><strong>Improves sharing:</strong> Send one file instead of multiple attachments.</li>
      <li><strong>Reduces storage space:</strong> Consolidates files to save disk space.</li>
      <li><strong>Enhances productivity:</strong> Easier to review and reference combined information.</li>
    </ul>
  </div>

  <div class="info-item">
    <h2>How to Use This Tool</h2>
    <p>
      To merge your PDFs, simply upload two or more PDF files using the ‚ÄúSelect Files‚Äù button or drag and drop them into the upload area. After your files are selected, click ‚ÄúMerge Now‚Äù to combine them instantly and download the final PDF.
    </p>
    <p>
      This process happens directly in your browser, so your files never leave your device, ensuring full privacy and security.
    </p>
  </div>

</div>
<div class="footer-note">
      This tool works directly in your browser. Your files never leave your device. 100% privacy.
    </div>
<script>
  const uploadArea = document.getElementById('upload-area');
  const fileInput = document.getElementById('pdfs');
  const mergeBtn = document.getElementById('mergeBtn');

  let selectedFiles = [];

  uploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
  });

  uploadArea.addEventListener('dragleave', () => {
    uploadArea.classList.remove('dragover');
  });

  uploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    handleFiles(e.dataTransfer.files);
  });

  fileInput.addEventListener('change', () => {
    handleFiles(fileInput.files);
    fileInput.value = '';
  });

  function handleFiles(files) {
    const newFiles = Array.from(files);
    newFiles.forEach(file => {
      if (!selectedFiles.some(f => f.name === file.name && f.size === file.size)) {
        selectedFiles.push(file);
        renderThumbnail(file, selectedFiles.length - 1);
      }
    });
    mergeBtn.style.display = selectedFiles.length >= 2 ? 'block' : 'none';
  }

 function mergePDFs() {
  if (selectedFiles.length < 2) {
    alert('Please select at least two PDF files.');
    return;
  }

  // ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± ÿßŸÑÿØŸÖÿ¨
  mergeBtn.style.display = 'none';

  // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÄ spinner
  document.getElementById('loading-spinner').style.display = 'block';

  const formData = new FormData();
  selectedFiles.forEach(file => {
    formData.append('pdfs', file);
  });

  fetch('mergepdf/start-merge', {
    method: 'POST',
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      window.location.href = `mergepdf/progress?session_id=${data.session_id}`;
    } else {
      alert(data.message || 'Failed to start merging.');
      mergeBtn.style.display = 'block'; // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ≤ÿ± ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ÿπŸÜÿØ ÿßŸÑÿÆÿ∑ÿ£
    }
  })
  .catch(() => {
    alert('An error occurred, please try again.');
    mergeBtn.style.display = 'block'; // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ≤ÿ± ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ÿπŸÜÿØ ÿßŸÑÿÆÿ∑ÿ£
  });
}


  function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    document.getElementById('container').classList.toggle('dark-mode');
    uploadArea.classList.toggle('dark-mode');
  }

  function renderThumbnail(file, index) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const typedarray = new Uint8Array(e.target.result);
      pdfjsLib.getDocument(typedarray).promise.then(pdf => {
        pdf.getPage(1).then(page => {
          const scale = 1;
          const viewport = page.getViewport({ scale });
          const canvas = document.createElement('canvas');
          canvas.width = viewport.width;
          canvas.height = viewport.height;
          const context = canvas.getContext('2d');
          page.render({ canvasContext: context, viewport: viewport }).promise.then(() => {
            const container = document.createElement('div');
            container.classList.add('thumbnail-item');

            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-btn';
            deleteBtn.innerHTML = '&times;';
            deleteBtn.onclick = () => removeFile(index);

            const filename = document.createElement('div');
            filename.className = 'thumbnail-filename';
            filename.title = file.name;
            filename.textContent = file.name;

            container.appendChild(deleteBtn);
            container.appendChild(canvas);
            container.appendChild(filename);
            document.getElementById('thumbnails').appendChild(container);
          });
        });
      });
    };
    reader.readAsArrayBuffer(file);
  }

  function removeFile(index) {
    selectedFiles.splice(index, 1);
    document.getElementById('thumbnails').innerHTML = '';
    selectedFiles.forEach((file, idx) => {
      renderThumbnail(file, idx);
    });
    mergeBtn.style.display = selectedFiles.length >= 2 ? 'block' : 'none';
  }
</script>

</body>
</html> 